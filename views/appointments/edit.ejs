<%- include('../partials/header') %>
<h1>Edit Appointment</h1>

<form class="card form" action="/appointments/<%= appt._id %>/edit" method="post">
  <div class="row">
    <label>Doctor
      <select name="doctor" required>
        <% doctors.forEach(d => { %>
          <option value="<%= d._id %>" <%= String(d._id) === String(appt.doctor._id) ? 'selected' : '' %> >
            <%= d.fullName %> — <%= d.specialty %>
          </option>
        <% }) %>
      </select>
    </label>

    <label>Date
      <input type="date" name="date" value="<%= dateValue %>" required>
    </label>

    <label>Time (AM/PM)
      <select name="time12" required>
        <% (slots || []).forEach(s => { %>
          <option value="<%= s %>" <%= s === time12 ? 'selected' : '' %>><%= s %></option>
        <% }) %>
      </select>
      <small class="muted">30-minute slots • AM/PM</small>
    </label>
  </div>

  <label>Notes<textarea name="notes" rows="2"><%= appt.notes || '' %></textarea></label>
  <button class="btn">Save changes</button>
  <a class="btn-out" href="/appointments">Cancel</a>
</form>
<%- include('../partials/footer') %>